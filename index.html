<!DOCTYPE html>
<html>
<head>
    <title>CSV Viewer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
</head>
<body>
    <h1>CSV Data</h1>
    <table id="csv-table" border="1">
        <!-- CSV Data will be inserted here -->
    </table>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded, starting to fetch CSV...');
            Papa.parse("https://aboele13.github.io/CompleteW101Gear/Myth_Gear/Myth_Robes.csv", {
                download: true,
                header: true,
                complete: function(results) {
                    console.log('CSV fetched successfully:', results);
                    var data = results.data;
                    var table = document.getElementById('csv-table');

                    if (data.length === 0) {
                        console.error('CSV file is empty or failed to parse.');
                        return;
                    }

                    // Create table header
                    var header = table.createTHead();
                    var headerRow = header.insertRow(0);
                    Object.keys(data[0]).forEach(function(key) {
                        var cell = headerRow.insertCell(-1);
                        cell.innerHTML = key;
                    });

                    // Create table body
                    var body = table.createTBody();
                    data.forEach(function(row) {
                        var bodyRow = body.insertRow(-1);
                        Object.values(row).forEach(function(value) {
                            var cell = bodyRow.insertCell(-1);
                            cell.innerHTML = value;
                        });
                    });
                },
                error: function(error) {
                    console.error('Error fetching CSV:', error);
                }
            });
        });
    </script>
</body>
</html>
